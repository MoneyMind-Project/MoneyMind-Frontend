<div class="notification-panel-overlay" (click)="close()">
  <div class="notification-panel" (click)="$event.stopPropagation()">
    <div class="panel-header">
      <h3>Notificaciones</h3>
      <button class="close-button" (click)="close()" aria-label="Cerrar">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
          <path d="M15 5L5 15M5 5l10 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>

    <div class="panel-content" *ngIf="!loading">
      <!-- Notificaciones -->
      <div *ngIf="notifications.length > 0" class="notifications-list">
        <div
          *ngFor="let notification of notifications"
          class="notification-item"
          [class.unread]="!notification.seen"
          (click)="markAsRead(notification, $event)">

          <div class="notification-icon" [ngClass]="getAlertClass(notification.alert_type)">
            <span>{{ getAlertIcon(notification.alert_type) }}</span>
          </div>

          <div class="notification-content">
            <p class="notification-message">{{ notification.message }}</p>
            <span class="notification-time">{{ getTimeAgo(notification.created_at) }}</span>
          </div>

          <div class="notification-indicator" *ngIf="!notification.seen"></div>
        </div>
      </div>

      <!-- Sin notificaciones -->
      <div *ngIf="notifications.length === 0" class="empty-state">
        <div class="empty-icon">ðŸ””</div>
        <p class="empty-text">No tienes notificaciones</p>
      </div>

      <!-- Ver todas -->
      <div *ngIf="notifications.length > 0" class="panel-footer">
        <button class="view-all-button" (click)="viewAllNotifications()">
          Ver todas las notificaciones
        </button>
      </div>
    </div>

    <!-- Loading -->
    <div *ngIf="loading" class="loading-container">
      <div class="spinner"></div>
    </div>
  </div>
</div>
