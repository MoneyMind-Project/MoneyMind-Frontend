<div class="profile-container">
  <!-- Header con título -->
  <div class="profile-header">
    <h1 class="profile-title">Mi Perfil</h1>
    <p class="profile-subtitle">Gestiona tu información y preferencias</p>
  </div>

  <div class="profile-content">
    <!-- Tarjeta de información del usuario -->
    <mat-card class="user-info-card" appearance="outlined">
      <div class="user-avatar-section">
        <div
          class="user-avatar"
          [ngStyle]="{'background-color': avatarColor}"
          (click)="toggleColorPicker()">

          <mat-icon
            class="avatar-icon"
            [ngStyle]="{'color': avatarIconColor}">
            person
          </mat-icon>

          <!-- Icono de pista para cambiar color -->
          <mat-icon class="avatar-edit-icon">palette</mat-icon>

          <!-- Overlay del selector de colores -->
          <div
            class="avatar-color-picker-overlay"
            *ngIf="showColorPicker">
            <button
              *ngFor="let color of colorOptions"
              class="color-option"
              [ngStyle]="{'background-color': color}"
              (click)="selectAvatarColor(color)">
            </button>
          </div>
        </div>

        <div class="user-info">
          <h2 class="user-name">{{ currentUser.first_name }}</h2>
          <p class="user-email">{{ currentUser.email }}</p>
          <span class="user-badge">Plan standard</span>
        </div>

        <button mat-icon-button class="logout-icon-btn" (click)="logOut()" matTooltip="Cerrar sesión">
          <mat-icon class="logout-icon">logout</mat-icon>
        </button>
      </div>


      <mat-divider></mat-divider>

      <div class="user-stats">
        <div class="stat-item">
          <mat-icon class="stat-icon">account_balance_wallet</mat-icon>
          <div class="stat-content">
            <span class="stat-label">Presupuesto actual</span>
            <span class="stat-value">{{ formatCurrency(current_balance) }}</span>
          </div>
        </div>
      </div>

      <button mat-stroked-button color="primary" class="edit-profile-btn" (click)="editProfile()">
        <mat-icon>edit</mat-icon>
        Editar información
      </button>
    </mat-card>

    <!-- Sección de configuración -->
    <div class="settings-section">

      <!-- Exportar reportes -->
      <mat-card class="settings-card" appearance="outlined">
        <div class="card-header-custom">
          <div class="header-icon-wrapper export-color">
            <mat-icon class="header-icon">download</mat-icon>
          </div>
          <div class="header-text">
            <h3 class="card-title-custom">Exportar reportes</h3>
            <p class="card-subtitle">Descarga tus datos financieros</p>
          </div>
        </div>

        <mat-divider></mat-divider>

        <div class="card-actions">
          <button mat-raised-button class="export-btn pdf-btn" (click)="exportPDF()">
            <mat-icon>picture_as_pdf</mat-icon>
            Descargar PDF
          </button>
          <button mat-raised-button class="export-btn excel-btn" (click)="exportExcel()">
            <mat-icon>table_chart</mat-icon>
            Descargar Excel
          </button>
        </div>
      </mat-card>
    </div>
  </div>
</div>
